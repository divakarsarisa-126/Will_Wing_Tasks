package Monday_task;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;

public class Voters_eligibility {

    public static void main(String[] args) {
      Map<String, String> people = new HashMap<>();
	     people.put("id1","10/10/2000");
	     people.put("id10","10/10/2003");
	     people.put("id3","12/04/2015");
	     people.put("id13","12/04/2004");
	     people.put("id12","12/04/2015");

        List<String> eligibleVoters = votersList(people);
       System.out.println("Eligible voters: " + eligibleVoters);
    }

    public static List<String> votersList(Map<String, String> people) {
        List<String> eligibleVoters = new ArrayList<>();
        SimpleDateFormat dfmt = new SimpleDateFormat("dd/MM/yyyy");
        Calendar today = Calendar.getInstance();

        for (Map.Entry<String, String> entry : people.entrySet()) {
            String id = entry.getKey();
            String dob = entry.getValue();

            try {
              Date dateOfBirth = dfmt.parse(dob);
              Calendar dobCalendar = Calendar.getInstance();
              dobCalendar.setTime(dateOfBirth);

              int age = today.get(Calendar.YEAR) - dobCalendar.get(Calendar.YEAR);

               if (today.get(Calendar.DAY_OF_YEAR) < dobCalendar.get(Calendar.DAY_OF_YEAR)) {
                  age--;
               }

               if (age >= 18) {
                  eligibleVoters.add(id);
               }

             }
            catch (ParseException e) {
                System.out.println("Error parsing date for ID: " + id);
            }
         }
           return eligibleVoters;
      }
  }
